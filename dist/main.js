(()=>{var e={738:(e,t,r)=>{const n=r(147),o=r(17),s=r(37);function i(e){console.log(`[dotenv][DEBUG] ${e}`)}const a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,c=/\\n/g,d=/\r\n|\n|\r/;function l(e,t){const r=Boolean(t&&t.debug),n={};return e.toString().split(d).forEach((function(e,t){const o=e.match(a);if(null!=o){const e=o[1];let t=o[2]||"";const r=t.length-1,s='"'===t[0]&&'"'===t[r];"'"===t[0]&&"'"===t[r]||s?(t=t.substring(1,r),s&&(t=t.replace(c,"\n"))):t=t.trim(),n[e]=t}else r&&i(`did not match key and value when parsing line ${t+1}: ${e}`)})),n}e.exports.config=function(e){let t=o.resolve(process.cwd(),".env"),r="utf8",a=!1;var c;e&&(null!=e.path&&(t="~"===(c=e.path)[0]?o.join(s.homedir(),c.slice(1)):c),null!=e.encoding&&(r=e.encoding),null!=e.debug&&(a=!0));try{const e=l(n.readFileSync(t,{encoding:r}),{debug:a});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?a&&i(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=l},21:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>x,parse:()=>y,stringify:()=>u,v1:()=>w,v3:()=>m,v4:()=>b,v5:()=>E,validate:()=>d,version:()=>P});const n=require("crypto");var o=r.n(n);const s=new Uint8Array(256);let i=s.length;function a(){return i>s.length-16&&(o().randomFillSync(s),i=0),s.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));const u=function(e,t=0){const r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!d(r))throw TypeError("Stringified UUID is invalid");return r};let p,f,h=0,g=0;const w=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let s=(e=e||{}).node||p,i=void 0!==e.clockseq?e.clockseq:f;if(null==s||null==i){const t=e.random||(e.rng||a)();null==s&&(s=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==i&&(i=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:g+1;const l=c-h+(d-g)/1e4;if(l<0&&void 0===e.clockseq&&(i=i+1&16383),(l<0||c>h)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,g=d,f=i,c+=122192928e5;const w=(1e4*(268435455&c)+d)%4294967296;o[n++]=w>>>24&255,o[n++]=w>>>16&255,o[n++]=w>>>8&255,o[n++]=255&w;const y=c/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=255&y,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=i>>>8|128,o[n++]=255&i;for(let e=0;e<6;++e)o[n+e]=s[e];return t||u(o)},y=function(e){if(!d(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function v(e,t,r){function n(e,n,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(n),i.set(e,n.length),i=r(i),i[6]=15&i[6]|t,i[8]=63&i[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=i[e];return o}return u(i)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const m=v("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),b=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return u(n)},E=v("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),x="00000000-0000-0000-0000-000000000000",P=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},672:(e,t,r)=>{const n=r(685),{errorHandler:o}=r(139),{validateUrl:s}=r(692),{getReqData:i}=r(29),{getAll:a}=r(538),{addPerson:c}=r(113),{getPerson:d}=r(83),{deletePerson:l}=r(543),{changePerson:u}=r(289),{validate:p}=r(414),{NotFoundError:f}=r(236),h=n.createServer((async(e,t)=>{try{const r=s(e.url);if(r)if("GET"===e.method){const e=d(r);t.writeHead(200,{"Content-Type":"application/json"}),t.write(JSON.stringify(e)),t.end()}else if("PUT"===e.method){const n=await i(e),o=u(n,r);t.writeHead(200,{"Content-Type":"application/json"}),t.write(JSON.stringify(o)),t.end()}else{if("DELETE"!==e.method)throw new f("Route not found");l(r)&&(t.writeHead(204,{"Content-Type":"application/json"}),t.end())}else if("GET"===e.method){const e=a();t.writeHead(200,{"Content-Type":"application/json"}),t.write(JSON.stringify(e)),t.end()}else{if("POST"!==e.method)throw new f("Route not found");{const r=await i(e);p(r);const n=c(r);t.writeHead(201,{"Content-Type":"application/json"}),t.write(JSON.stringify(n)),t.end()}}}catch(r){o(r,e,t)}}));e.exports={app:h}},182:(e,t,r)=>{const n=r(738),o=r(17);n.config({path:o.join(__dirname,"../.env")}),e.exports={PORT:process.env.PORT,NODE_ENV:"production"}},226:(e,t,r)=>{const n=r(21).v4;e.exports={Person:class{constructor({id:e=n(),name:t="Name",age:r=11,hobbies:o=[]}={}){this.id=e,this.name=t,this.age=r,this.hobbies=o}}}},113:(e,t,r)=>{const{Person:n}=r(226),{getDB:o}=r(715);e.exports={addPerson:e=>{const t=o(),r=new n(e);return t.push(r),r}}},289:(e,t,r)=>{const{NotFoundError:n}=r(236),{getDB:o,updateDB:s}=r(715);e.exports={changePerson:(e,t)=>{const r=o(),i=r.find((e=>e.id===t));if(!i)throw new n(`person with id ${t} not found`);const a=r.map((r=>r.id===t?{...r,...e}:r));return s(a),{...i,...e}}}},543:(e,t,r)=>{const{NotFoundError:n}=r(236),{updateDB:o,getDB:s}=r(715);e.exports={deletePerson:e=>{const t=s();if(!t.find((t=>t.id===e)))throw new n(`person with id ${e} not found`);const r=t.filter((t=>t.id!==e));if(o(r))return!0;throw new Error("somthing wrong in updateDB")}}},538:(e,t,r)=>{const{getDB:n}=r(715);e.exports={getAll:()=>n()}},83:(e,t,r)=>{const{NotFoundError:n}=r(236),{getDB:o}=r(715);e.exports={getPerson:e=>{const t=o().find((t=>t.id===e));if(t)return t;throw new n(`person with id ${e} not found`)}}},715:e=>{let t=[];e.exports={updateDB:e=>(t=e,!0),getDB:()=>t}},139:e=>{e.exports={errorHandler:(e,t,r)=>{console.log(e.message),"InvalidError"===e.name?r.writeHead(400,{"Content-Type":"application/json"}):"NotFoundError"===e.name?r.writeHead(404,{"Content-Type":"application/json"}):(r.writeHead(500,{"Content-Type":"application/json"}),e.message="Internal server error"),r.end(JSON.stringify({message:`${e.message}`}))}}},236:e=>{class t extends Error{constructor(e){super(e),this.name=this.constructor.name}}class r extends Error{constructor(e){super(e),this.name=this.constructor.name}}e.exports={InvalidError:t,NotFoundError:r}},29:e=>{e.exports={getReqData:e=>new Promise(((t,r)=>{try{let n="";e.on("data",(e=>{n+=e.toString()})),e.on("end",(()=>{try{t(JSON.parse(n))}catch(e){r(e)}}))}catch(e){r(e)}}))}},414:(e,t,r)=>{const{InvalidError:n}=r(236);e.exports={validate:e=>{if(!e.hasOwnProperty("name")||!e.hasOwnProperty("age")||!e.hasOwnProperty("hobbies"))throw new n("data does not contain required fields")}}},692:(e,t,r)=>{const n=r(21),{InvalidError:o,NotFoundError:s}=r(236);e.exports={validateUrl:e=>{const[,t,r,i]=e.split("/");if("person"!==t)throw new s("Route not found");if(i)throw new s("Route not found");if(r&&!n.validate(r))throw new o("id incorrect");return r}}},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const{PORT:e}=r(182),{app:t}=r(672);t.listen(e,(()=>{console.log(`server started on port: ${e}`)}))})()})();